<div class="reports-page">
  <div class="reports-container">
    <!-- Filters Bar -->
    <div class="filters-bar">

      <div class="filter-group">
        <span class="material-icons filter-icon">filter_list</span>
        <label class="filter-label">Mes:</label>
        <select class="filter-select" [(ngModel)]="selectedMonth">
          @for (month of months; track $index) {
            <option [value]="$index">{{ month }}</option>
          }
        </select>
      </div>

      <div class="filter-group">
        <label class="filter-label">Año:</label>
        <select class="filter-select" [(ngModel)]="selectedYear">
          @for (year of years; track year) {
            <option [value]="year">{{ year }}</option>
          }
        </select>
      </div>

      <div class="filter-summary">
        <span class="material-icons">calendar_today</span>
        <span class="summary-text">{{ months[selectedMonth] }} {{ selectedYear }}</span>
      </div>

      <button class="clear-filters-btn" (click)="clearFilters()">
        <span class="material-icons">refresh</span>
        Limpiar
      </button>
    </div>

    <!-- Main Content -->
    <div class="reports-content">

  <!-- Report Categories -->
  <div class="categories-grid">
    @for (category of reportCategories; track category.id) {
      <div class="category-card">
        <div
          class="category-header"
          (click)="toggleCategory(category.id)"
        >
          <div class="category-left">
            <div class="category-icon">
              <span class="material-icons">{{ category.iconName }}</span>
            </div>
            <span class="category-title">{{ category.title }}</span>
          </div>
          <span
            class="material-icons chevron"
            [ngClass]="{'open': isCategoryExpanded(category.id)}"
          >
            expand_more
          </span>
        </div>

        @if (isCategoryExpanded(category.id)) {
          <div class="category-content">
            <div class="option-list">
              @for (option of category.options; track option.id) {
                <div class="option-item">
                  <span class="option-label">{{ option.label }}</span>
                  <div class="option-actions">
                    <button
                      class="action-btn pdf"
                      (click)="handleExport('PDF', option.label)"
                    >
                      <span class="material-icons">description</span>
                      PDF
                    </button>
                    <button
                      class="action-btn excel"
                      (click)="handleExport('Excel', option.label)"
                    >
                      <span class="material-icons">table_chart</span>
                      Excel
                    </button>
                  </div>
                </div>
              }
            </div>
          </div>
        }
      </div>
    }
  </div>

      <!-- Recent Reports -->
      <div class="recent-reports">
        <div class="section-header">
          <h3 class="section-title">Reportes Recientes</h3>
        </div>
        <div class="report-list">
          @for (report of recentReports; track report.name) {
            <div class="report-item">
              <div class="report-left">
                <div class="report-icon" [ngClass]="report.type">
                  @if (report.type === 'pdf') {
                    <span class="material-icons">description</span>
                  } @else {
                    <span class="material-icons">table_chart</span>
                  }
                </div>
                <div class="report-info">
                  <h4>{{ report.name }}</h4>
                  <p>{{ report.date }} • {{ report.size }}</p>
                </div>
              </div>
              <button class="download-btn">
                <span class="material-icons">download</span>
              </button>
            </div>
          }
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Notification -->
  @if (toast) {
    <div class="toast">
      <div class="toast-icon">
        <span class="material-icons">check</span>
      </div>
      <span class="toast-text">
        Generando {{ toast.type }}: {{ toast.label }}
      </span>
    </div>
  }
</div>
