<div class="historial-container">
  <!-- Header -->
  <div class="historial-header">
    <h1>Historial de Partidos de <span class="equipo-nombre">{{ nombreEquipo }}</span></h1>
  </div>

  <!-- Lista de Partidos -->
  <div class="partidos-lista" *ngIf="partidos.length > 0; else sinPartidos">
    <div
      class="partido-card"
      *ngFor="let partido of partidos"
      [class.victoria]="obtenerResultado(partido) === 'victoria'"
      [class.empate]="obtenerResultado(partido) === 'empate'"
      [class.derrota]="obtenerResultado(partido) === 'derrota'"
    >
      <!-- Contenido del partido -->
      <div class="partido-contenido">
        <!-- Equipo Local -->
        <div class="equipo">
          <picture>
            <source [srcset]="toAVIF(partido.equipo_local.logo_url || 'https://via.placeholder.com/80')" type="image/avif">
            <source [srcset]="toWebP(partido.equipo_local.logo_url || 'https://via.placeholder.com/80')" type="image/webp">
            <img
              [src]="partido.equipo_local.logo_url || 'https://via.placeholder.com/80'"
              [alt]="partido.equipo_local.nombre"
              class="equipo-logo"
              loading="lazy"
            />
          </picture>
          <span class="equipo-nombre-text">{{ partido.equipo_local.nombre }}</span>
        </div>

        <!-- Marcador con Estado -->
        <div class="marcador-container">
          <div class="estado-partido">
            <span *ngIf="obtenerResultado(partido) === 'victoria'">Victoria</span>
            <span *ngIf="obtenerResultado(partido) === 'empate'">Empate</span>
            <span *ngIf="obtenerResultado(partido) === 'derrota'">Derrota</span>
          </div>
          <div class="marcador">
            <span class="anotaciones">{{ partido.anotaciones_local }}</span>
            <span class="separador">-</span>
            <span class="anotaciones">{{ partido.anotaciones_visitante }}</span>
          </div>
        </div>

        <!-- Equipo Visitante -->
        <div class="equipo">
          <picture>
            <source [srcset]="toAVIF(partido.equipo_visitante.logo_url || 'https://via.placeholder.com/80')" type="image/avif">
            <source [srcset]="toWebP(partido.equipo_visitante.logo_url || 'https://via.placeholder.com/80')" type="image/webp">
            <img
              [src]="partido.equipo_visitante.logo_url || 'https://via.placeholder.com/80'"
              [alt]="partido.equipo_visitante.nombre"
              class="equipo-logo"
              loading="lazy"
            />
          </picture>
          <span class="equipo-nombre-text">{{ partido.equipo_visitante.nombre }}</span>
        </div>

        <!-- Fecha -->
        <div class="partido-fecha-container">
          <span class="fecha-label">Fecha de finalización</span>
          <div class="partido-fecha">
            <span class="material-icons">event</span>
            {{ formatearFecha(partido.fecha_finalizacion) }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Estado vacío -->
  <ng-template #sinPartidos>
    <div class="empty-state">
      <div class="empty-icon">
        <span class="material-icons">sports_soccer</span>
      </div>
      <h3>No hay partidos en el historial</h3>
      <p>Los partidos finalizados aparecerán aquí</p>
    </div>
  </ng-template>
</div>
