<div class="contact-container">
  <section class="contact-section">
    <h1>Contáctanos</h1>
    <p>
      ¿Tienes alguna pregunta sobre nuestras instalaciones, reservas o productos? Nuestro equipo
      está aquí para ayudarte. Completa el formulario y nos pondremos en contacto contigo lo antes
      posible. También puedes visitarnos en cualquiera de nuestras sedes para recibir atención
      personalizada.
    </p>

    <div class="contact-content">
      <div class="contact-form">
        <form (ngSubmit)="onSubmit()" #contactFormRef="ngForm">
          <div class="form-row">
            <div class="form-group">
              <label for="nombres">Nombres</label>
              <input
                type="text"
                id="nombres"
                name="nombres"
                [(ngModel)]="contactForm.nombres"
                [class.has-value]="contactForm.nombres"
                placeholder="Juan"
                required
              />
            </div>

            <div class="form-group">
              <label for="apellidos">Apellidos</label>
              <input
                type="text"
                id="apellidos"
                name="apellidos"
                [(ngModel)]="contactForm.apellidos"
                [class.has-value]="contactForm.apellidos"
                placeholder="Pérez"
                required
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="email">Email</label>
              <input
                type="email"
                id="email"
                name="email"
                [(ngModel)]="contactForm.email"
                [class.has-value]="contactForm.email"
                placeholder="ejemplo@gmail.com"
                required
              />
            </div>

            <div class="form-group">
              <label for="telefono">Teléfono</label>
              <input
                type="tel"
                id="telefono"
                name="telefono"
                [(ngModel)]="contactForm.telefono"
                [class.has-value]="contactForm.telefono"
                placeholder="+51 987 654 321"
                pattern="[0-9+\-\s\(\)]*"
                maxlength="15"
                (input)="validatePhone($event)"
                required
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="sede">Sede</label>
              <div class="dropdown-sede">
                <button
                  type="button"
                  class="btn-dropdown-custom"
                  (click)="toggleDropdownSede()"
                  [class.activo]="dropdownSedeAbierto()">
                  <span class="dropdown-current">
                    <i class="fas fa-map-marker-alt"></i>
                    {{ sedeSeleccionada() || 'Seleccione una sede...' }}
                  </span>
                  <i class="fas fa-chevron-down"></i>
                </button>

                @if (dropdownSedeAbierto()) {
                  <div class="dropdown-menu">
                    @if (sedesAgrupadas().length === 0) {
                      <div class="dropdown-loading">
                        <i class="fas fa-spinner fa-spin"></i>
                        <span>Cargando sedes...</span>
                      </div>
                    } @else {
                      @for (grupo of sedesAgrupadas(); track grupo.nombre) {
                        <div class="dropdown-group">
                          <div class="dropdown-group-label">{{ grupo.nombre }}</div>
                          @for (sede of grupo.sedes; track sede.id_sede) {
                            <button
                              type="button"
                              class="dropdown-item"
                              [class.seleccionado]="contactForm.sede === getNombreSede(sede)"
                              (click)="seleccionarSede(sede)">
                              <i class="fas fa-building"></i>
                              <span class="opcion-label">{{ getNombreSede(sede) }}</span>
                              @if (contactForm.sede === getNombreSede(sede)) {
                                <i class="fas fa-check check-icon"></i>
                              }
                            </button>
                          }
                        </div>
                      }
                    }
                  </div>
                }
              </div>
            </div>

            <div class="form-group">
              <label for="tipo">Tipo</label>
              <div class="dropdown-tipo">
                <button
                  type="button"
                  class="btn-dropdown-custom"
                  (click)="toggleDropdownTipo()"
                  [class.activo]="dropdownTipoAbierto()">
                  <span class="dropdown-current">
                    <i class="fas fa-tag"></i>
                    {{ tipoSeleccionado() || 'Seleccione un tipo...' }}
                  </span>
                  <i class="fas fa-chevron-down"></i>
                </button>

                @if (dropdownTipoAbierto()) {
                  <div class="dropdown-menu">
                    @for (tipo of tipos; track tipo) {
                      <button
                        type="button"
                        class="dropdown-item"
                        [class.seleccionado]="contactForm.tipo === tipo"
                        (click)="seleccionarTipo(tipo)">
                        <i class="fas fa-circle-dot"></i>
                        <span class="opcion-label">{{ tipo }}</span>
                        @if (contactForm.tipo === tipo) {
                          <i class="fas fa-check check-icon"></i>
                        }
                      </button>
                    }
                  </div>
                }
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="mensaje">Mensaje</label>
            <textarea
              id="mensaje"
              name="mensaje"
              [(ngModel)]="contactForm.mensaje"
              [class.has-value]="contactForm.mensaje"
              rows="4"
              placeholder="Escribe tu mensaje aquí..."
              maxlength="500"
              (input)="updateCharCount()"
              required
            ></textarea>
            <div class="char-counter" [ngClass]="getCharCounterClass()">
              <span class="char-count">{{ charCount }}</span>/500 caracteres
            </div>
          </div>

          <button type="submit" class="btn-submit" [disabled]="!contactFormRef.valid">
            Enviar
          </button>
        </form>
      </div>

      <div class="contact-info">
        <div class="redes-sociales">
          <div class="logo-section">
            <img
              src="Imagotipo Oro Sport Club.png"
              alt="Sports Club Logo"
              class="contact-logo"
            />
            <h3>Oro Sports Club</h3>
            <p>Tu destino deportivo favorito</p>
          </div>

          <div class="social-links">
            <h4>Síguenos en:</h4>
            <div class="social-icons">
              <a href="https://facebook.com" class="social-icon facebook" target="_blank">
                <i class="fab fa-facebook"></i>
              </a>
              <a href="https://instagram.com" class="social-icon instagram" target="_blank">
                <i class="fab fa-instagram"></i>
              </a>
              <a href="https://x.com" class="social-icon twitter" target="_blank">
                <i class="fab fa-x-twitter"></i>
              </a>
              <a href="https://youtube.com" class="social-icon youtube" target="_blank">
                <i class="fab fa-youtube"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
