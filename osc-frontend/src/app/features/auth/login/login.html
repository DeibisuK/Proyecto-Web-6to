<div class="modal-overlay" [class.closing]="isClosing">
  <div class="modal-content">
    <button class="modal-close-btn" (click)="cerrar()">
      <span class="material-icons">close</span>
    </button>

    <!-- Contenedor con animación -->
    <div class="container-wrapper" [ngClass]="{ 'register-mode': isRegisterMode }">
      <!-- Panel de Formulario -->
      <div class="formulario-panel">
        <!-- Formulario de Login -->
        <div class="formulario login-form">
          <h2>Iniciar Sesión</h2>

          <h4>Correo electrónico</h4>
          <input type="email" [(ngModel)]="usuario" placeholder="gary@gmail.com" (keyup.enter)="loginConEmail()" />

          <h4>Contraseña</h4>
          <input type="password" [(ngModel)]="password" placeholder="Ingrese su contraseña" (keyup.enter)="loginConEmail()" />

          <a href="#" (click)="abrirRecuperacion(); $event.preventDefault()"
            >Olvidaste tu contraseña?</a
          >

          <button class="btn-primary" (click)="loginConEmail()">Iniciar sesión</button>

          <p class="social-text">O continuar con</p>

          <div class="social-buttons">
            <button class="btn-google" (click)="loginConGoogle()">
              <i class="fa-brands fa-google"></i> Google
            </button>
            <button class="btn-facebook" (click)="loginConFacebook()">
              <i class="fa-brands fa-facebook"></i> Facebook
            </button>
          </div>
        </div>

        <!-- Formulario de Registro -->
        <div class="formulario register-form">
          <h2>Crear Cuenta</h2>

          <h4>Nombre completo</h4>
          <input type="text" [(ngModel)]="nombre" placeholder="Tu nombre completo" (keyup.enter)="registroConEmail()" />

          <h4>Correo electrónico</h4>
          <input type="email" [(ngModel)]="email" placeholder="usuario@email.com" (keyup.enter)="registroConEmail()" />

          <h4>Contraseña</h4>
          <input type="password" [(ngModel)]="passwordRegistro" placeholder="Crea una contraseña" (keyup.enter)="registroConEmail()" />

          <button class="btn-primary" (click)="registroConEmail()">Registrarse</button>

          <p class="social-text">O registrarse con</p>

          <div class="social-buttons">
            <button class="btn-google" (click)="loginConGoogle()">
              <i class="fa-brands fa-google"></i> Google
            </button>
            <button class="btn-facebook" (click)="loginConFacebook()">
              <i class="fa-brands fa-facebook"></i> Facebook
            </button>
          </div>
        </div>
      </div>

      <!-- Panel de Bienvenida -->
      <div class="bienvenida-panel">
        <div class="bienvenida">
            <img src="logo-colores.png" alt="Logo" style="width: 200px; height: auto;" />
          <h3>{{ isRegisterMode ? '¡Bienvenido de nuevo!' : '¡Hola, Deportista!' }}</h3>
          <h6>
            {{
              isRegisterMode
                ? 'Para seguir conectado con nosotros, inicia sesión con tu cuenta.'
                : 'Accede para reservar, comprar y disfrutar de tu deporte favorito.'
            }}
          </h6>
          <button class="btn-secondary" (click)="toggleForm()">
            {{ isRegisterMode ? 'Iniciar sesión' : 'Crear cuenta' }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de verificación 2FA -->
@if (mostrar2FA && usuarioTemporal) {
  <app-two-factor-verify
    [usuario]="usuarioTemporal"
    (verificacionExitosa)="on2FAVerificado($event)"
    (cancelar)="on2FACancelado()"
  />
}
