<div class="equipos-container">
  <!-- Header -->
  <div class="equipos-header">
    <div class="header-info">
      <h1>Mis Equipos</h1>
      <p>Administra y organiza tus equipos deportivos</p>
    </div>
    <button class="btn-crear" (click)="abrirModalCrear()">
      <span class="material-icons">add</span>
      Crear Equipo
    </button>
  </div>

  <!-- Buscador y Filtros -->
  <div class="search-section">
    <div class="search-box">
      <span class="material-icons">search</span>
      <input 
        type="text" 
        placeholder="Buscar equipos por nombre..."
        [(ngModel)]="searchTerm"
        (input)="filtrarEquipos()"
      />
    </div>
    <div class="stats">
      <span class="stat-badge">
        <span class="material-icons">groups</span>
        {{ equiposFiltrados.length }} Equipos
      </span>
    </div>
  </div>

  <!-- Lista de Equipos -->
  <div class="equipos-grid" *ngIf="!isLoading && equiposFiltrados.length > 0; else contenidoAlternativo">
    <div class="equipo-card" *ngFor="let equipo of equiposFiltrados">
      <div class="equipo-logo">
        <img 
          *ngIf="equipo.logo_url" 
          [src]="equipo.logo_url" 
          [alt]="equipo.nombre_equipo"
        />
        <div class="logo-fallback" *ngIf="!equipo.logo_url">
          <span class="material-icons">shield</span>
        </div>
      </div>
      
      <div class="equipo-info">
        <div class="titulo-con-badge">
          <h3>{{ equipo.nombre_equipo }}</h3>
          <span class="deporte-badge" *ngIf="equipo.id_deporte" [attr.data-deporte]="equipo.id_deporte">
            {{ obtenerNombreDeporte(equipo.id_deporte) }}
          </span>
        </div>
        <p class="descripcion">{{ equipo.descripcion || 'Sin descripción' }}</p>
      </div>

      <div class="equipo-actions">
        <button 
          class="btn-action btn-edit" 
          (click)="editarEquipo(equipo)"
          title="Editar equipo"
        >
          <span class="material-icons">edit</span>
        </button>
        <button 
          class="btn-action btn-delete" 
          (click)="eliminarEquipo(equipo)"
          title="Eliminar equipo"
        >
          <span class="material-icons">delete</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Skeleton Loading y Sin Equipos -->
  <ng-template #contenidoAlternativo>
    <!-- Skeleton Loading -->
    <div class="equipos-grid" *ngIf="isLoading">
      <div class="equipo-card skeleton" *ngFor="let item of [1,2,3,4,5,6]">
        <div class="equipo-logo skeleton-logo">
          <div class="skeleton-shimmer"></div>
        </div>
        <div class="equipo-info">
          <div class="skeleton-text skeleton-title"></div>
          <div class="skeleton-text skeleton-badge" style="width: 30%;"></div>
          <div class="skeleton-text skeleton-detail"></div>
          <div class="skeleton-text skeleton-detail" style="width: 70%;"></div>
        </div>
        <div class="equipo-actions">
          <div class="skeleton-button"></div>
          <div class="skeleton-button"></div>
        </div>
      </div>
    </div>

    <!-- Sin equipos -->
    <div class="empty-state" *ngIf="!isLoading && equiposFiltrados.length === 0">
      <div class="empty-icon">
        <span class="material-icons">sports_soccer</span>
      </div>
      <h3>No tienes equipos registrados</h3>
      <p>Crea tu primer equipo para empezar a organizar tus partidos</p>
    </div>
  </ng-template>
</div>

<!-- Modal de Crear/Editar Equipo -->
<div class="modal-overlay" *ngIf="mostrarModal" (click)="cerrarModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <app-crear-equipo
      [equipoEditar]="equipoSeleccionado"
      (equipoGuardado)="onEquipoGuardado($event)"
      (cerrarModal)="cerrarModal()"
    ></app-crear-equipo>
  </div>
</div>

<!-- Modal de Confirmación de Eliminación -->
<div class="modal-overlay" *ngIf="mostrarModalEliminar" (click)="cerrarModalEliminar()">
  <div class="modal-confirm" (click)="$event.stopPropagation()">
    <div class="confirm-header">
      <span class="material-icons danger">warning</span>
      <h3>¿Eliminar Equipo?</h3>
    </div>
    <p>¿Estás seguro de que deseas eliminar el equipo <strong>{{ equipoAEliminar?.nombre_equipo }}</strong>?</p>
    <p class="confirm-warning">Esta acción no se puede deshacer.</p>
    <div class="confirm-actions">
      <button class="btn btn-secondary" (click)="cerrarModalEliminar()">
        Cancelar
      </button>
      <button class="btn btn-danger" (click)="confirmarEliminacion()">
        <span class="material-icons">delete</span>
        Eliminar
      </button>
    </div>
  </div>
</div>
