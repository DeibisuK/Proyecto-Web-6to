<div class="modal-crear-equipo">
  <div class="modal-header">
    <h2>{{ equipoEditar ? 'Editar Equipo' : 'Crear Nuevo Equipo' }}</h2>
    <button class="btn-close" (click)="cerrar()" type="button">
      <span class="material-icons">close</span>
    </button>
  </div>

  <form class="modal-body" (ngSubmit)="guardarEquipo()" #equipoForm="ngForm">
    <!-- Inputs en 2 columnas con Logo a la derecha -->
    <div class="form-layout">
      <div class="form-inputs">
        <!-- Nombre del Equipo -->
        <div class="form-group">
          <label for="nombre">Nombre del Equipo</label>
          <input 
            type="text" 
            id="nombre"
            name="nombre"
            [(ngModel)]="equipoData.nombre_equipo"
            placeholder="Ej: Los Insanos FC"
            required
            maxlength="50"
            #nombreInput="ngModel"
          />
          <span class="char-count">{{ equipoData.nombre_equipo.length }}/50</span>
          @if (nombreInput.invalid && nombreInput.touched) {
            <div class="error-message">
              <span class="material-icons">error</span>
              El nombre del equipo es obligatorio
            </div>
          }
        </div>

        <!-- Deporte -->
        <div class="form-group">
          <label for="deporte">Deporte</label>
          <select 
            id="deporte"
            name="deporte"
            [(ngModel)]="equipoData.id_deporte"
            required
            #deporteInput="ngModel"
          >
            <option [value]="null" disabled selected>Selecciona un deporte</option>
            <option [value]="1">Fútbol</option>
            <option [value]="2">Básquetbol</option>
            <option [value]="3">Voleibol</option>
            <option [value]="4">Tenis</option>
            <option [value]="5">Pádel</option>
          </select>
          @if (deporteInput.invalid && deporteInput.touched) {
            <div class="error-message">
              <span class="material-icons">error</span>
              Debes seleccionar un deporte
            </div>
          }
        </div>
      </div>

      <!-- Logo del Equipo a la derecha -->
      <div class="logo-section-right">
        <div class="logo-preview" [class.has-image]="logoPreview || equipoData.logo_url">
          @if (logoPreview || equipoData.logo_url) {
            <img 
              [src]="logoPreview || equipoData.logo_url" 
              alt="Logo del equipo"
            />
          }
          @if (!logoPreview && !equipoData.logo_url) {
            <div class="logo-placeholder">
              <span class="material-icons">add_photo_alternate</span>
              <p>Subir logo</p>
            </div>
          }
        </div>
        <input 
          type="file" 
          #fileInput 
          (change)="onFileSelected($event)" 
          accept="image/*"
          style="display: none;"
        />
        <button 
          type="button" 
          class="btn-upload" 
          (click)="fileInput.click()"
        >
          <span class="material-icons">cloud_upload</span>
          {{ logoPreview || equipoData.logo_url ? 'Cambiar' : 'Subir' }}
        </button>
      </div>
    </div>

    <!-- Descripción (ancho completo) -->
    <div class="form-group">
      <label for="descripcion">Descripción</label>
      <textarea 
        id="descripcion"
        name="descripcion"
        [(ngModel)]="equipoData.descripcion"
        placeholder="Breve descripción del equipo..."
        rows="4"
        maxlength="200"
        #descripcionInput="ngModel"
      ></textarea>
      <span class="char-count">{{ equipoData.descripcion.length }}/200</span>
    </div>

    <!-- Botones de Acción -->
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="cerrar()">
        Cancelar
      </button>
      <button 
        type="submit" 
        class="btn btn-primary" 
        [disabled]="equipoForm.invalid || isLoading"
      >
        @if (isLoading) {
          <span class="spinner"></span>
        }
        @if (!isLoading) {
          <span>{{ equipoEditar ? 'Actualizar' : 'Crear Equipo' }}</span>
        }
      </button>
    </div>
  </form>
</div>
