# üîê .env Setup - Quick Reference

## TL;DR (Resumen R√°pido)

```bash
# 1. Configura todo autom√°ticamente
cd OSC-Backend
node setup-env.js

# 2. Instala dependencias en todos los servicios
npm install # (en cada servicio o usa tu script)

# 3. Inicia los servicios
node start-backend.js  # o el comando que uses
```

## ‚ùì Pregunta Frecuente: ¬øQu√© hacer con .env en GitHub?

### ‚ùå NUNCA hagas esto:
```bash
git add .env
git commit -m "a√±adiendo configuraci√≥n"
git push
```
‚ò†Ô∏è **Riesgo:** Expones contrase√±as y secretos p√∫blicamente

### ‚úÖ SIEMPRE haz esto:

1. **Mant√©n .env en .gitignore** (ya configurado ‚úì)
2. **Crea .env.example** con valores de ejemplo (ya creado ‚úì)
3. **Documenta en README c√≥mo configurar** (ya actualizado ‚úì)

## üìÅ Archivos Creados para Ti

```
OSC-Backend/
‚îú‚îÄ‚îÄ setup-env.js          ‚Üê Script autom√°tico (Node.js)
‚îú‚îÄ‚îÄ setup-env.sh          ‚Üê Script autom√°tico (Bash)
‚îú‚îÄ‚îÄ ENV-SETUP-GUIDE.md    ‚Üê Gu√≠a completa detallada
‚îú‚îÄ‚îÄ .env-quick-ref.md     ‚Üê Este archivo (referencia r√°pida)
‚îÇ
‚îú‚îÄ‚îÄ api-gateway/
‚îÇ   ‚îî‚îÄ‚îÄ .env.example      ‚Üê Plantilla (S√ç subir a Git)
‚îÇ   ‚îî‚îÄ‚îÄ .env              ‚Üê Config real (NO subir - en .gitignore)
‚îÇ
‚îú‚îÄ‚îÄ user-service/
‚îÇ   ‚îî‚îÄ‚îÄ .env.example      ‚Üê Plantilla
‚îÇ   ‚îî‚îÄ‚îÄ .env              ‚Üê Config real (NO subir)
‚îÇ
‚îú‚îÄ‚îÄ products-service/
‚îÇ   ‚îî‚îÄ‚îÄ .env.example      ‚Üê Plantilla
‚îÇ   ‚îî‚îÄ‚îÄ .env              ‚Üê Config real (NO subir)
‚îÇ
‚îú‚îÄ‚îÄ buy-service/
‚îÇ   ‚îî‚îÄ‚îÄ .env.example      ‚Üê Plantilla
‚îÇ   ‚îî‚îÄ‚îÄ .env              ‚Üê Config real (NO subir)
‚îÇ
‚îú‚îÄ‚îÄ court-service/
‚îÇ   ‚îî‚îÄ‚îÄ .env.example      ‚Üê Plantilla
‚îÇ   ‚îî‚îÄ‚îÄ .env              ‚Üê Config real (NO subir)
‚îÇ
‚îî‚îÄ‚îÄ match-service/
    ‚îî‚îÄ‚îÄ .env.example      ‚Üê Plantilla
    ‚îî‚îÄ‚îÄ .env              ‚Üê Config real (NO subir)
```

## üéØ Workflow para Nuevos Desarrolladores

**Cuando un nuevo miembro se une al equipo:**

1. Clona el repo:
   ```bash
   git clone https://github.com/DeibisuK/Proyecto-Web-6to.git
   cd Proyecto-Web-6to/OSC-Backend
   ```

2. Configura variables de entorno:
   ```bash
   node setup-env.js
   # O manualmente: cp .env.example .env en cada servicio
   ```

3. Solicita credenciales reales al l√≠der del equipo:
   - Password de base de datos
   - JWT_SECRET compartido
   - Otras variables sensibles

4. Instala y corre:
   ```bash
   npm install
   npm start
   ```

## üöÄ Despliegue a Producci√≥n

**NO uses archivos .env en producci√≥n.**  
Usa el sistema de variables de entorno de tu plataforma:

### Heroku
```bash
heroku config:set DB_PASSWORD=valor_real
heroku config:set JWT_SECRET=valor_real
```

### Vercel / Netlify
Dashboard ‚Üí Settings ‚Üí Environment Variables

### Docker
```yaml
# docker-compose.yml
environment:
  - DB_PASSWORD=${DB_PASSWORD}
  - JWT_SECRET=${JWT_SECRET}
```

### AWS / Azure / GCP
- AWS Secrets Manager
- Azure Key Vault  
- Google Secret Manager

## üîß Comandos √ötiles

### Conectar a la Base de Datos
```bash
# Usando psql (si lo tienes instalado)
psql -h db-postgresql-project-web-6to-do-user-23894496-0.g.db.ondigitalocean.com \
     -U doadmin \
     -d bd_orosports \
     -p 25060

# Te pedir√° la contrase√±a
```

### Verificar qu√© no se sube a Git
```bash
git status
# No debe aparecer ning√∫n archivo .env (solo .env.example)
```

### Ver qu√© est√° ignorado
```bash
git check-ignore -v .env
# Debe mostrar: .gitignore:X:.env    .env
```

## üÜò Emergencia: Sub√≠ .env por error

```bash
# 1. CAMBIA TODAS LAS CONTRASE√ëAS INMEDIATAMENTE
# 2. Elimina del repo:
git rm --cached .env
git commit -m "Remove .env file"
git push

# 3. Para eliminarlo del historial completo:
git filter-branch --force --index-filter \
  "git rm --cached --ignore-unmatch .env" \
  --prune-empty --tag-name-filter cat -- --all

git push origin --force --all
```

## üìä Variables por Servicio

| Variable | Gateway | User | Products | Buy | Court | Match |
|----------|---------|------|----------|-----|-------|-------|
| PORT | PORT=3000 | PORT=3001 | PORT=3002 | PORT=3003 | PORT=3004 | PORT=3005 |
| DB_* | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| SERVICE_URLS | ‚úÖ | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå |
| ALLOWED_ORIGINS | ‚úÖ | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå |

## üí° Tips Pro

1. **Base de Datos en DigitalOcean** - Todos los servicios comparten la misma BD
2. **Puerto 25060** - Es el puerto por defecto de PostgreSQL en DigitalOcean
3. **Conexi√≥n SSL** - DigitalOcean requiere SSL en producci√≥n
4. **Documenta SIEMPRE** - README claro = equipo feliz
5. **Revisa .gitignore ANTES de commit** - Prevenir > Lamentar
6. **Backups regulares** - Configura backups autom√°ticos en DigitalOcean

## üìö M√°s Info

- [ENV-SETUP-GUIDE.md](./ENV-SETUP-GUIDE.md) - Gu√≠a detallada completa
- [README.md](./README.md) - Documentaci√≥n del backend

---

**Made with ‚ù§Ô∏è for OSC Backend Team**
